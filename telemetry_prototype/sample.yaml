sample:
  name: Telemetry Prototype
common:
  tags: filesystem
  modules:
    - fatfs
tests:
  sample.filesystem.fat_fs:
    depends_on: sdhc
    harness: console
    harness_config:
      fixture: fixture_sdhc
      type: multi_line
      regex:
        - "Block count"
        - "Sector size"
        - "Memory Size"
        - "Disk mounted"
  sample.filesystem.fat_fs.rpi_pico2_m33:
    build_only: true
    platform_allow: rpi_pico2/rp2350a/m33
    extra_args:
      - EXTRA_CONF_FILE=boards/rpi_pico2_m33.conf
      - DTC_OVERLAY_FILE=boards/rpi_pico2_m33.overlay
  sample.filesystem.fat_fs.has_sdmmc_disk:
    build_only: true
    filter: dt_compat_enabled("zephyr,sdmmc-disk")
    integration_platforms:
      - rpi_pico2_m33

tests:
  weather_station.default: {}
  weather_station.debug:
    extra_overlay_confs:
      - debug.conf
